<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>xmind 7 update 1 破解 | 脸滚的流水...</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- gallery that comes before the header--><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a></nav><div class="container post-meta"><div class="post-time">2016-07-07</div></div></div><div class="container post-header"><h1>xmind 7 update 1 破解</h1></div><div class="container post-content"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>这个是2016年7月份没事的时候瞎搞的，最近发现这种方法失效了，所以就放出来。</p>
<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>需要修改的包net.xmind.verify_3.6.1.201512221925<br>                org.xmind.meggy_3.6.1.201512221925<br>准备工具jd-gui  eclipse IntelliIdea</p>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ul>
<li><p>1.是用jd-gui反编译以上两个包，点击file-&gt;save all sources保存源码</p>
</li>
<li><p>2.新建两个eclipse plun－in project 把源码复制到src目录下面，其余文件复制到根工程目录下面（试过 improt plus－ins and fragments的工程 貌似失败了 忘记为啥）</p>
</li>
<li><p>3.<img src="14678952562124.jpg" alt=""><br>因为eclipse 在这个界面提供了很多可视化操作 所以我就放弃了用ant写build.xml打包了</p>
</li>
<li><p>4.打包!因为这两个jar包依赖了其他jar包,所以添加classpath的时候,把xmind安装目录下面的plugin文件夹里面的jar全添加进去了，打包只要点上图右下角exprot wizard这个就可以打包了</p>
</li>
<li><p>5.打包的时候 net.xmind.verify的MAINFEST.MF 文件夹会有报错 ，把报错的移除掉就可以，jd的反编译会有好多错误 我是结合了idea的反编译一起改的</p>
</li>
</ul>
<h3 id="工程结构"><a href="#工程结构" class="headerlink" title="工程结构"></a>工程结构</h3><p>本质就是一个eclipse gui的插件工程<br>src文件夹：存放源码<br>META-INF:顾名思义 存放类元信息的地方重点在MAINFEST.MF</p>
<font color="red">MAINFEST.MF 片段</font><br>&gt;Manifest-Version: 1.0<br>Export-Package: net.xmind.verify,net.xmind.verify.ui<br><font color="red">(Enumerate all the packages that this plug-in exposes to clients.  All other packages will be hidden from clients at all times.<br>就是说这个Export Package的包允许被其他插件访问 其他的隐藏)</font><br>Bundle-ActivationPolicy: lazy<br>Built-By: so<br>Bundle-Name: %pluginName<br>Bundle-Localization: plugin<br>Created-By: Apache Maven 3.3.3<br>Bundle-RequiredExecutionEnvironment: J2SE-1.5<br>Require-Bundle: org.eclipse.ui,org.eclipse.core.runtime,org.apache.com<br> mons.codec,org.json,net.xmind.signin;bundle-version=”[3.6.0,3.7.0)”,o<br> rg.xmind.ui.toolkit;bundle-version=”[3.6.0,3.7.0)”,org.xmind.core.com<br> mand;bundle-version=”[3.6.0,3.7.0)”<br> <font color="red">(Require-Bundle 需要依赖的插件)</font><br>Bundle-Vendor: %providerName<br>Build-Jdk: 1.7.0_75<br>Bundle-Version: 3.6.1.201512221925<br>Bundle-ManifestVersion: 2<br>Bundle-Activator: net.xmind.verify.internal.VerifyPlugin<br><em>（插件的的激活类 大概是这个意思）</em><br>Bundle-SymbolicName: net.xmind.verify;singleton:=true<br>Archiver-Version: Plexus Archiver<br>Name: net/xmind/verify/internal/LicenseVerifier$VerificationJob$7.clas<br> s<br>SHA-256-Digest: UzAsYnNacAIW3/SDkvW6pk80hEDCLxYnNJPcwoxFmLY=<br><font color="red">（每个class文件有一个对应的sha值 ）</font>

<p>SIGNINF.DSA:与签名文件相关联的签名程序块文件，它存储了用于签名 JAR 文件的公共签名。</p>
<p>SIGNINF.SF: JAR 文件的签名文件。</p>
<p><font color="red">SIGNINF.SF 片段：</font></p>
<blockquote>
<p>Signature-Version: 1.0<br>SHA-256-Digest-Manifest-Main-Attributes: JGnBO5rPBiTyeCRQyOLcPoCKlWxWq<br> 61cD9xYGCuOWnE=<br>SHA-256-Digest-Manifest: YBfAA1n5gYq3kchjzemOJnO5IyhAvKCmQl1sdig2XEY=<br>Created-By: 1.7.0_75 (Oracle Corporation)<br>Name: net/xmind/verify/ui/internal/StartupVerifier.class<br>SHA-256-Digest: Vk+LkwOWVeqQlvILKjYty4+YZGjBmwPF0QomtNDIHY0=</p>
</blockquote>
<p>其余文件与破解无关 略过</p>
<h3 id="打包与避过校验"><a href="#打包与避过校验" class="headerlink" title="打包与避过校验"></a>打包与避过校验</h3><p>阶段一：一开始随意修改net.xmind.verify<br>开始界面提示<br><img src="14679009753582.jpg" alt=""></p>
<p>在关于xmind-&gt;安装细节-&gt;配置信息-&gt;错误日志里面发现了以下log</p>
<blockquote>
<p>!MESSAGE 下列 jar 中的清单文件或特征符文件已被篡改：/at org.xmind.ui.internal.meggy.PluginGuardian.isPluginSignatureVerified(PluginGuardian.java:205)</p>
</blockquote>
<p>  以上是org.xmind.meggy这个包的代码 于是顺藤摸瓜找到</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPluginSignatureVerified</span><span class="params">(X509Certificate targetCertificate, String pluginId)</span> </span>&#123;</div><div class="line">    Bundle bundle = Platform.getBundle(pluginId);</div><div class="line">    <span class="keyword">if</span>(bundle == <span class="keyword">null</span>) &#123;</div><div class="line">        MeggyPlugin.getDefault().getLog().log(<span class="keyword">new</span> Status(<span class="number">4</span>, <span class="string">"org.xmind.meggy"</span>, <span class="string">"Bundle not found: \'"</span> + pluginId + <span class="string">"\'."</span>));</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Map certs = bundle.getSignerCertificates(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span>(certs.isEmpty()) &#123;</div><div class="line">            MeggyPlugin.getDefault().getLog().log(<span class="keyword">new</span> Status(<span class="number">4</span>, <span class="string">"org.xmind.meggy"</span>, <span class="string">"Bundle not signed: \'"</span> + pluginId + <span class="string">"\'."</span>));</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            Iterator var6 = certs.keySet().iterator();</div><div class="line"></div><div class="line">            <span class="keyword">while</span>(var6.hasNext()) &#123;</div><div class="line">                X509Certificate cert = (X509Certificate)var6.next();</div><div class="line">                <span class="keyword">if</span>(cert.equals(targetCertificate)) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            MeggyPlugin.getDefault().getLog().log(<span class="keyword">new</span> Status(<span class="number">4</span>, <span class="string">"org.xmind.meggy"</span>, <span class="string">"Bundle not signed correctly: \'"</span> + pluginId + <span class="string">"\'."</span>));</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  故方法名思义，是校验文件签名的方法，所以直接返回改为true 跳过校验</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPluginSignatureVerified</span><span class="params">(X509Certificate targetCertificate, String pluginId)</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>但是又出现了一个新的问题</p>
<blockquote>
<p>!MESSAGE 下列 jar 中的清单文件或特征符文件已被篡改：/Applications/XMind.app/Contents/Eclipse/plugins/net.xmind.verify_3.6.1.201512221925.jar<br>!STACK 0<br>java.security.SignatureException: 下列 jar 中的清单文件或特征符文件已被篡改：/Applications/XMind.app/Contents/Eclipse/plugins/net.xmind.verify_3.6.1.201512221925.jar<br>    at org.eclipse.osgi.internal.signedcontent.SignatureBlockProcessor.verifyManifestAndSignatureFile(SignatureBlockProcessor.java:158)</p>
</blockquote>
<p>一下是堆栈的相关代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Verify the digest listed in each entry in the .SF file with corresponding section in the manifest</div><div class="line"> * <span class="doctag">@throws</span> SignatureException </div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">verifyManifestAndSignatureFile</span><span class="params">(<span class="keyword">byte</span>[] manifestBytes, <span class="keyword">byte</span>[] sfBytes)</span> <span class="keyword">throws</span> SignatureException </span>&#123;</div><div class="line"></div><div class="line">	String sf = <span class="keyword">new</span> String(sfBytes, SignedContentConstants.UTF8);</div><div class="line">	sf = stripContinuations(sf);</div><div class="line"></div><div class="line">	<span class="comment">// check if there -Digest-Manfiest: header in the file</span></div><div class="line">	<span class="keyword">int</span> off = sf.indexOf(digestManifestSearch);</div><div class="line">	<span class="keyword">if</span> (off != -<span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">int</span> start = sf.lastIndexOf(<span class="string">'\n'</span>, off);</div><div class="line">		String manifestDigest = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">if</span> (start != -<span class="number">1</span>) &#123;</div><div class="line">			<span class="comment">// Signature-Version has to start the file, so there</span></div><div class="line">			<span class="comment">// should always be a newline at the start of</span></div><div class="line">			<span class="comment">// Digest-Manifest</span></div><div class="line">			String digestName = sf.substring(start + <span class="number">1</span>, off);</div><div class="line">			<span class="keyword">if</span> (digestName.equalsIgnoreCase(MD5_STR))</div><div class="line">				manifestDigest = calculateDigest(getMessageDigest(MD5_STR), manifestBytes);</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (digestName.equalsIgnoreCase(SHA1_STR))</div><div class="line">				manifestDigest = calculateDigest(getMessageDigest(SHA1_STR), manifestBytes);</div><div class="line">			<span class="keyword">else</span></div><div class="line">				manifestDigest = calculateDigest(getMessageDigest(digestName), manifestBytes);</div><div class="line">			off += digestManifestSearchLen;</div><div class="line"></div><div class="line">			<span class="comment">// find out the index of first '\n' after the -Digest-Manifest: </span></div><div class="line">			<span class="keyword">int</span> nIndex = sf.indexOf(<span class="string">'\n'</span>, off);</div><div class="line">			String digestValue = sf.substring(off, nIndex - <span class="number">1</span>);</div><div class="line"></div><div class="line">			<span class="comment">// check if the the computed digest value of manifest file equals to the digest value in the .sf file</span></div><div class="line">			<span class="keyword">if</span> (!digestValue.equals(manifestDigest)) &#123;</div><div class="line">				SignatureException se = <span class="keyword">new</span> SignatureException(NLS.bind(SignedContentMessages.Security_File_Is_Tampered, <span class="keyword">new</span> String[] &#123;signedBundle.getBaseFile().toString()&#125;));</div><div class="line">				signedBundleHook.log(se.getMessage(), FrameworkLogEntry.ERROR, se);</div><div class="line">				<span class="keyword">throw</span> se;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面大概意思就是根据MAINFEST.MF和SIGNIN.SF去校验jar包的合法性<br>一开始是往错误的方向走，想要改这个包的代码，但是因为反编译出来非常多错误所以花费了不少时间在这上面，使用了idea的反编译也是不少错误，做了不少无用功，后来想着是eclipse的包名 或许有开源出来 就去maven找了下 真的找到了，而且附带了注释。本着理通整个流程的想法，顺着报错的堆栈找到了process方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// read all the signature block file names into a list</span></div><div class="line">Enumeration&lt;String&gt; en = wrappedBundleFile.getEntryPaths(META_INF);</div><div class="line">List&lt;String&gt; signers = <span class="keyword">new</span> ArrayList&lt;String&gt;(<span class="number">2</span>);</div><div class="line"><span class="keyword">while</span> (en.hasMoreElements()) &#123;</div><div class="line">	String name = en.nextElement();</div><div class="line">	<span class="keyword">if</span> ((name.endsWith(DOT_DSA) || name.endsWith(DOT_RSA)) &amp;&amp; name.indexOf(<span class="string">'/'</span>) == name.lastIndexOf(<span class="string">'/'</span>))</div><div class="line">		signers.add(name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// this means the jar is not signed</span></div><div class="line"><span class="keyword">if</span> (signers.size() == <span class="number">0</span>)</div><div class="line">	<span class="keyword">return</span> createUnsignedContent();</div><div class="line"></div><div class="line"><span class="keyword">byte</span> manifestBytes[] = readIntoArray(be);</div></pre></td></tr></table></figure>
<p>就是说当找不到RSA和DSA结尾这两个文件的时候就跳过签名验证，于是乎，我在打包的时候把sf和dsa两个文件排除在外。然后还是各种class not found，其实此时已经打包好了，也可以正常使用了，但是估计是之前的错误报错被缓存下来了，所以一直跑不通，解决方法就是删除软件和用户目录下面与xmind有关的信息，在重新安装。至此打包替换的已经避过校验了 想怎么改就怎么改</p>
<h3 id="破解思路"><a href="#破解思路" class="headerlink" title="破解思路"></a>破解思路</h3><p>一开始言小午是说修改isvlidate()这个函数的值为true就行了，修改后，发现点击升级pro后没有反应，pro功能也不能用，所以就转变思路的 </p>
<p>错误思路一：发现每个包都有个messages.properties，这东西是用来做国际化的 warningDialog_title_invalidUser=XMind这种形式，有对应的语言包 根据不同语言加载不同的文件。<br>我把语言改成英文 然后找找到了填写序列号的那个验证按钮在messages.properties中对应的key， 想从验证按钮的点击事件监听开始 看下处理流程，但是我小看了这货的复杂程度，最后费了好大的功夫都搞不定，看了好多eclipse gui的api，最后感觉这样耗下去都可以开发eclipse gui了</p>
<p>错误思路二：一开始以为验证序列号是https请求验证，有这种想法是因为在启动的时候都会做一次signin的请求（写了个文件输出类，输出追一些启动过程的数据），让我以为这个原来是要做登陆操作才能校验成功。所以从https请求查起，一直顺着那个https请求找下去发现并不是，验证序列号其实是在本地的。<br>signin失败了也没关系，实际也是，做软件的，不允许软件脱机使用也是不合理的。<br>关于追踪https请求的过程，其实还没有找到判断https响应的代码，其实找到了顺着这个思路估计也是可行的，但是因为https请求的包分散在几个jar包了，所以没有去追踪</p>
<p>正确思路：搜关键词mail 搜到了一个方法LicenseVerifier.doVerifyLicenseKey()<br>发现licenseKey是长度为225个字符组成，前12个字符是licenseheader </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LicenseKeyHeader <span class="title">decode</span><span class="params">(String header)</span> <span class="keyword">throws</span> IllegalArgumentException</span></div><div class="line"><span class="comment">/*     */</span>   &#123;</div><div class="line"><span class="comment">/* 116 */</span>     <span class="keyword">if</span> (header.length() != <span class="number">12</span>) &#123;</div><div class="line"><span class="comment">/* 117 */</span>       <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</div><div class="line"><span class="comment">/* 118 */</span>         <span class="string">"Invalid length of license key header: "</span> + header.length());</div><div class="line"><span class="comment">/*     */</span>     &#125;</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 121 */</span>     String marker = header.substring(<span class="number">0</span>, <span class="number">1</span>);</div><div class="line"><span class="comment">/* 122 */</span>     <span class="keyword">if</span> (!<span class="string">"X"</span>.equals(marker)) &#123;</div><div class="line"><span class="comment">/* 123 */</span>       <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid license key header: "</span> + </div><div class="line"><span class="comment">/* 124 */</span>         header);</div><div class="line"><span class="comment">/*     */</span>     &#125;</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 127 */</span>     String type = header.substring(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 129 */</span>     String vendorName = header.substring(<span class="number">2</span>, <span class="number">4</span>);</div><div class="line">				<span class="comment">//36进制</span></div><div class="line"><span class="comment">/* 130 */</span>     <span class="keyword">int</span> majorVersion = Integer.parseInt(header.substring(<span class="number">4</span>, <span class="number">5</span>), <span class="number">36</span>);</div><div class="line"><span class="comment">/* 131 */</span>     <span class="keyword">int</span> minorVersion = Integer.parseInt(header.substring(<span class="number">5</span>, <span class="number">6</span>), <span class="number">36</span>);</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 133 */</span>     String licenseeType = header.substring(<span class="number">6</span>, <span class="number">7</span>);</div><div class="line"><span class="comment">/* 134 */</span>     <span class="keyword">int</span> yearsOfUpgrade = Integer.parseInt(header.substring(<span class="number">7</span>, <span class="number">9</span>), <span class="number">36</span>);</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 136 */</span>     <span class="keyword">int</span> freeMonths = decodeFreeMonthsFromHeader(header);</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 138 */</span>     <span class="keyword">return</span> <span class="keyword">new</span> LicenseKeyHeader(header, type, vendorName, majorVersion, </div><div class="line"><span class="comment">/* 139 */</span>       minorVersion, licenseeType, yearsOfUpgrade, freeMonths);</div><div class="line"><span class="comment">/*     */</span>   &#125;</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">decodeFreeMonthsFromHeader</span><span class="params">(String header)</span></span></div><div class="line"><span class="comment">/*     */</span>   &#123;</div><div class="line"><span class="comment">/* 144 */</span>     <span class="keyword">char</span> encodedFreeMonths = header.toLowerCase().charAt(<span class="number">9</span>);</div><div class="line"><span class="comment">/*     */</span> </div><div class="line"><span class="comment">/* 146 */</span>     <span class="keyword">int</span> freeMonths = encodedFreeMonths &gt; <span class="string">'`'</span> ? encodedFreeMonths - <span class="string">'W'</span> : </div><div class="line"><span class="comment">/* 147 */</span>       encodedFreeMonths - <span class="string">'0'</span>;</div><div class="line"><span class="comment">/* 148 */</span>     <span class="keyword">return</span> freeMonths;</div><div class="line"><span class="comment">/*     */</span>   &#125;</div></pre></td></tr></table></figure>
<p>实际用到了11位，通过各种校验猜出前这个字符串的可能值<br>“XAxx36A17Ixx” x代表不知道，因为压根没校验到 所以随便填17I是代表还有12个月的激活时间 实际可以填更长的，A是代表激活的是pro版本<br>整个doVerifyLicenseKey 读下来 我发现成功的时候执行了以下代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//2 targetStatus 没注册的话是7</span></div><div class="line">      <span class="keyword">this</span>.validity ＝ LicenseVerifier.createValidity(targetStatus, licensedTo, header)</div></pre></td></tr></table></figure>
<p>此时 targetStatus 为2<br>所以我就把一大段的代码都注释掉了，替换成这两句话 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LicenseKeyHeader header =  LicenseKeyHeader.decode(<span class="string">"XAXM36A17Ixm"</span>);</div><div class="line">        	<span class="keyword">this</span>.validity = LicenseVerifier.createValidity(<span class="number">2</span>, licensedTo, header);</div></pre></td></tr></table></figure>
<p>结果可行了 没有任何校验 序列号邮箱随便填，就通过了之后就没深究原因了,估计是会存储一个破解状态在本地了,因为看加载日志 每次都会加载这些基本信息的</p>
<h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p>  暴力读代码不可取，前后花了10多个小时</p>
<h3 id="相关资源"><a href="#相关资源" class="headerlink" title="相关资源"></a>相关资源</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;org.eclipse.osgi&lt;/artifactId&gt;</div><div class="line">	&lt;version&gt;3.10.101.v20150820-1432&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
</div></div><div class="post-main post-comment"><div data-thread-key="2016/07/07/xmind-cracked/" data-title="xmind 7 update 1 破解" data-url="http://chellynov.github.io/2016/07/07/xmind-cracked/" class="ds-thread"></div><script>var duoshuoQuery = {short_name:'novchelly'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>